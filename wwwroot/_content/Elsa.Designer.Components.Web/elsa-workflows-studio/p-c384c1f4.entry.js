import{r as e,h as t}from"./p-9ac75b7d.js";import{D as a,i as s}from"./p-56c74ab8.js";import{_ as l,t as r,a as n,b as i,d as o,i as u,e as c,f as d,g as h,h as f,j as p,k as g,l as x,m as y,n as v,o as w,p as m,q as b,r as k,s as S,u as C,v as D,w as I,x as M,y as A,z as W,A as B,B as F,C as j,D as T,E as L,F as z,G as Y,c as H}from"./p-c912e9a0.js";import{_ as O,a as U,i as V,b as E,c as R,d as $,e as _,f as q,u as N,z as P}from"./p-66f5843f.js";import{c as K}from"./p-21f6b19b.js";import{e as G}from"./p-adbb57a5.js";import{O as Q,b as J}from"./p-52f280e6.js";import{E as X}from"./p-80452beb.js";import{a as Z}from"./p-f0c26962.js";import{b as ee}from"./p-ab6c762d.js";import{h as te}from"./p-e4caa342.js";import{l as ae}from"./p-b03b50df.js";import{T as se}from"./p-fc89621a.js";import"./p-62f42337.js";import"./p-83f217d4.js";import"./p-bd8b186e.js";var le=Math.ceil,re=Math.max,ne=function(e,t,l,a){var s=-1,r=O,n=!0,i=e.length,o=[],c=t.length;if(!i)return o;l&&(t=d(t,h(l))),a?(r=U,n=!1):t.length>=200&&(r=p,n=!1,t=new f(t));e:for(;++s<i;){var u=e[s],g=null==l?u:l(u);if(u=a||0!==u?u:0,n&&g==g){for(var w=c;w--;)if(t[w]===g)continue e;o.push(u)}else r(t,g,a)||o.push(u)}return o},ie=g((function(e,t){return V(e)?ne(e,o(t,1,V,!0)):[]})),oe=g((function(e,t){var l=y(t);return V(l)&&(l=void 0),V(e)?ne(e,o(t,1,V,!0),x(l)):[]})),ue=g((function(e,t){var l=y(t);return V(l)&&(l=void 0),V(e)?ne(e,o(t,1,V,!0),void 0,l):[]})),ce=function(e,t,l,a){for(var s=e.length,r=a?s:-1;(a?r--:++r<s)&&t(e[r],r,e););return l?n(e,a?0:r,a?r+1:s):n(e,a?r+1:0,a?s:r)},de=function(e,t,l,a){var s=e.length;for((l=r(l))<0&&(l=-l>s?0:s+l),(a=void 0===a||a>s?s:r(a))<0&&(a+=s),a=l>a?0:function(e){return e?v(r(e),0,4294967295):0}(a);l<a;)e[l++]=t;return e},he=function(e){return e&&e.length?e[0]:void 0},fe=he,pe=Math.max,ge=Math.min,xe=function(e,t,l){for(var a=l?U:O,s=e[0].length,r=e.length,n=r,i=Array(r),o=1/0,c=[];n--;){var u=e[n];n&&t&&(u=d(u,h(t))),o=ge(u.length,o),i[n]=!l&&(t||s>=120&&u.length>=120)?new f(n&&u):void 0}u=e[0];var g=-1,w=i[0];e:for(;++g<s&&c.length<o;){var y=u[g],x=t?t(y):y;if(y=l||0!==y?y:0,!(w?p(w,x):a(c,x,l))){for(n=r;--n;){var m=i[n];if(!(m?p(m,x):a(e[n],x,l)))continue e}w&&w.push(x),c.push(y)}}return c},ye=function(e){return V(e)?e:[]},ve=g((function(e){var t=d(e,ye);return t.length&&t[0]===e[0]?xe(t):[]})),we=g((function(e){var t=y(e),l=d(e,ye);return t===y(l)?t=void 0:l.pop(),l.length&&l[0]===e[0]?xe(l,x(t)):[]})),me=g((function(e){var t=y(e),l=d(e,ye);return(t="function"==typeof t?t:void 0)&&l.pop(),l.length&&l[0]===e[0]?xe(l,void 0,t):[]})),be=Array.prototype.join,ke=Math.max,Se=Math.min,Ce=function(e,t,l,a){for(var s=l-1,r=e.length;++s<r;)if(a(e[s],t))return s;return-1},De=Array.prototype.splice,Ie=function(e,t,l,a){var s=a?Ce:w,r=-1,n=t.length,i=e;for(e===t&&(t=c(t)),l&&(i=d(e,h(l)));++r<n;)for(var o=0,u=t[r],f=l?l(u):u;(o=s(i,f,o,a))>-1;)i!==e&&De.call(i,o,1),De.call(e,o,1);return e},Me=function(e,t){return e&&e.length&&t&&t.length?Ie(e,t):e},Ae=g(Me),We=Array.prototype.splice,Be=function(e,t){for(var l=e?t.length:0,a=l-1;l--;){var s=t[l];if(l==a||s!==r){var r=s;k(s)?We.call(e,s,1):(i=D(i=s,n=e),null==(n=I(n,i))||delete n[C(y(i))])}}var n,i;return e},Fe=E((function(e,t){var l=null==e?0:e.length,a=function(e,t){for(var l=-1,a=t.length,s=Array(a),r=null==e;++l<a;)s[l]=r?void 0:S(e,t[l]);return s}(e,t);return Be(e,d(t,(function(e){return k(e,l)?+e:e})).sort(M)),a})),je=Array.prototype.reverse,Te=Math.floor,Le=Math.min,ze=function(e,t,l,a){var s=0,r=null==e?0:e.length;if(0===r)return 0;for(var n=(t=l(t))!=t,i=null===t,o=A(t),d=void 0===t;s<r;){var c=Te((s+r)/2),u=l(e[c]),h=void 0!==u,f=null===u,g=u==u,p=A(u);if(n)var w=a||g;else w=d?g&&(a||h):i?g&&h&&(a||!f):o?g&&h&&!f&&(a||!p):!f&&!p&&(a?u<=t:u<t);w?s=c+1:r=c}return Le(r,4294967294)},Ye=function(e,t,l){var a=0,s=null==e?a:e.length;if("number"==typeof t&&t==t&&s<=2147483647){for(;a<s;){var r=a+s>>>1,n=e[r];null!==n&&!A(n)&&(l?n<=t:n<t)?a=r+1:s=r}return s}return ze(e,t,W,l)},He=function(e,t){for(var l=-1,a=e.length,s=0,r=[];++l<a;){var n=e[l],i=t?t(n):n;if(!l||!B(i,o)){var o=i;r[s++]=0===n?0:n}}return r},Oe=g((function(e){var t=y(e);return V(t)&&(t=void 0),R(o(e,1,V,!0),x(t))})),Ue=g((function(e){var t=y(e);return t="function"==typeof t?t:void 0,R(o(e,1,V,!0),void 0,t)})),Ve=Math.max,Ee=function(e){if(!e||!e.length)return[];var t=0;return e=F(e,(function(e){if(V(e))return t=Ve(e.length,t),!0})),j(t,(function(t){return d(e,T(t))}))},Re=function(e,t){if(!e||!e.length)return[];var l=Ee(e);return null==t?l:d(l,(function(e){return L(t,void 0,e)}))},$e=g((function(e,t){return V(e)?ne(e,t):[]})),_e=function(e,t,l){var a=e.length;if(a<2)return a?R(e[0]):[];for(var s=-1,r=Array(a);++s<a;)for(var n=e[s],i=-1;++i<a;)i!=s&&(r[s]=ne(r[s]||n,e[i],t,l));return R(o(r,1),t,l)},qe=g((function(e){return _e(F(e,V))})),Ne=g((function(e){var t=y(e);return V(t)&&(t=void 0),_e(F(e,V),x(t))})),Pe=g((function(e){var t=y(e);return t="function"==typeof t?t:void 0,_e(F(e,V),void 0,t)})),Ke=g(Ee),Ge=g((function(e){var t=e.length,l=t>1?e[t-1]:void 0;return l="function"==typeof l?(e.pop(),l):void 0,Re(e,l)})),Qe={chunk:function(e,t,a){t=(a?l(e,t,a):void 0===t)?1:re(r(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var i=0,o=0,d=Array(le(s/t));i<s;)d[o++]=n(e,i,i+=t);return d},compact:function(e){for(var t=-1,l=null==e?0:e.length,a=0,s=[];++t<l;){var r=e[t];r&&(s[a++]=r)}return s},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),l=arguments[0],a=e;a--;)t[a-1]=arguments[a];return i(u(l)?c(l):[l],o(t,1))},difference:ie,differenceBy:oe,differenceWith:ue,drop:function(e,t,l){var a=null==e?0:e.length;return a?(t=l||void 0===t?1:r(t),n(e,t<0?0:t,a)):[]},dropRight:function(e,t,l){var a=null==e?0:e.length;return a?(t=l||void 0===t?1:r(t),n(e,0,(t=a-t)<0?0:t)):[]},dropRightWhile:function(e,t){return e&&e.length?ce(e,x(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?ce(e,x(t),!0):[]},fill:function(e,t,a,s){var r=null==e?0:e.length;return r?(a&&"number"!=typeof a&&l(e,t,a)&&(a=0,s=r),de(e,t,a,s)):[]},findIndex:z,findLastIndex:Y,first:fe,flatten:q,flattenDeep:function(e){return null!=e&&e.length?o(e,1/0):[]},flattenDepth:function(e,t){return null!=e&&e.length?(t=void 0===t?1:r(t),o(e,t)):[]},fromPairs:function(e){for(var t=-1,l=null==e?0:e.length,a={};++t<l;){var s=e[t];a[s[0]]=s[1]}return a},head:he,indexOf:function(e,t,l){var a=null==e?0:e.length;if(!a)return-1;var s=null==l?0:r(l);return s<0&&(s=pe(a+s,0)),w(e,t,s)},initial:function(e){return null!=e&&e.length?n(e,0,-1):[]},intersection:ve,intersectionBy:we,intersectionWith:me,join:function(e,t){return null==e?"":be.call(e,t)},last:y,lastIndexOf:function(e,t,l){var a=null==e?0:e.length;if(!a)return-1;var s=a;return void 0!==l&&(s=(s=r(l))<0?ke(a+s,0):Se(s,a-1)),t==t?function(e,t,l){for(var a=l+1;a--;)if(e[a]===t)return a;return a}(e,t,s):m(e,b,s,!0)},nth:function(e,t){return e&&e.length?function(e,t){var l=e.length;if(l)return k(t+=t<0?l:0,l)?e[t]:void 0}(e,r(t)):void 0},pull:Ae,pullAll:Me,pullAllBy:function(e,t,l){return e&&e.length&&t&&t.length?Ie(e,t,x(l)):e},pullAllWith:function(e,t,l){return e&&e.length&&t&&t.length?Ie(e,t,void 0,l):e},pullAt:Fe,remove:function(e,t){var l=[];if(!e||!e.length)return l;var a=-1,s=[],r=e.length;for(t=x(t);++a<r;){var n=e[a];t(n,a,e)&&(l.push(n),s.push(a))}return Be(e,s),l},reverse:function(e){return null==e?e:je.call(e)},slice:function(e,t,a){var s=null==e?0:e.length;return s?(a&&"number"!=typeof a&&l(e,t,a)?(t=0,a=s):(t=null==t?0:r(t),a=void 0===a?s:r(a)),n(e,t,a)):[]},sortedIndex:function(e,t){return Ye(e,t)},sortedIndexBy:function(e,t,l){return ze(e,t,x(l))},sortedIndexOf:function(e,t){var l=null==e?0:e.length;if(l){var a=Ye(e,t);if(a<l&&B(e[a],t))return a}return-1},sortedLastIndex:function(e,t){return Ye(e,t,!0)},sortedLastIndexBy:function(e,t,l){return ze(e,t,x(l),!0)},sortedLastIndexOf:function(e,t){if(null!=e&&e.length){var l=Ye(e,t,!0)-1;if(B(e[l],t))return l}return-1},sortedUniq:function(e){return e&&e.length?He(e):[]},sortedUniqBy:function(e,t){return e&&e.length?He(e,x(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?n(e,1,t):[]},take:function(e,t,l){return e&&e.length?(t=l||void 0===t?1:r(t),n(e,0,t<0?0:t)):[]},takeRight:function(e,t,l){var a=null==e?0:e.length;return a?(t=l||void 0===t?1:r(t),n(e,(t=a-t)<0?0:t,a)):[]},takeRightWhile:function(e,t){return e&&e.length?ce(e,x(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?ce(e,x(t)):[]},union:N,unionBy:Oe,unionWith:Ue,uniq:function(e){return e&&e.length?R(e):[]},uniqBy:function(e,t){return e&&e.length?R(e,x(t)):[]},uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?R(e,void 0,t):[]},unzip:Ee,unzipWith:Re,without:$e,xor:qe,xorBy:Ne,xorWith:Pe,zip:Ke,zipObject:P,zipObjectDeep:function(e,t){return $(e||[],t||[],_)},zipWith:Ge};const Je={en:{default:{Title:"Workflow Instances",Search:"Search",Untitled:"Untitled",Table:{Id:"ID",CorrelationId:"Correlation ID",Workflow:"Workflow",Version:"Version",InstanceName:"Instance Name",Status:"Status",Created:"Created",Finished:"Finished",LastExecuted:"Last Executed",Faulted:"Faulted",ContextMenu:{View:"View",Delete:"Delete"}},DeleteDialog:{Title:"Delete Workflow Instance",Message:"Are you sure you wish to permanently delete this workflow instance?"},BulkDeleteDialog:{Title:"Delete Selected Workflow Instances",Message:"Are you sure you wish to permanently delete all selected workflow instances?"},Pager:{Display:"Showing {{Start}} to {{End}} of {{Results}} results"},BulkActions:{Title:"Bulk Actions",Actions:{Delete:"Delete"}},Filters:{Workflow:{Label:"Workflow",All:"All"},Status:{All:"All",Label:"Status",Running:"Running",Idle:"Idle",Suspended:"Suspended",Faulted:"Faulted",Finished:"Finished",Cancelled:"Cancelled"},Sort:{Label:"Sort",SelectedLabel:"Sort by: {{Key}}",Finished:"Finished",LastExecuted:"Last Executed",Started:"Started"}}}},"nl-NL":{default:{}}},Xe=class{constructor(t){e(this,t),this.orderBy=Q.Started,this.workflowBlueprints=[],this.workflowInstances={items:[],page:1,pageSize:50,totalCount:0},this.selectedOrderByState=Q.Started,this.selectedWorkflowInstanceIds=[],this.currentPage=0,this.currentPageSize=15,this.t=(e,t)=>this.i18next.t(e,t),this.onPaged=async e=>{this.currentPage=e.detail.page,await this.loadWorkflowInstances()}}async componentWillLoad(){this.i18next=await ae(this.culture,Je),this.history&&(this.history.listen((e=>this.routeChanged(e))),this.applyQueryString(this.history.location.search)),await this.loadWorkflowBlueprints(),await this.loadWorkflowInstances();let e=[{text:(0,this.t)("BulkActions.Actions.Delete"),name:"Delete"}];G.emit(X.WorkflowInstanceBulkActionsLoading,this,{sender:this,bulkActions:e}),this.bulkActions=e}async getSelectedWorkflowInstanceIds(){return this.selectedWorkflowInstanceIds}async refresh(){await this.loadWorkflowInstances(),this.updateSelectAllChecked()}async handleWorkflowIdChanged(e){this.selectedWorkflowId=e,await this.loadWorkflowInstances()}async handleWorkflowStatusChanged(e){this.selectedWorkflowStatus=e,await this.loadWorkflowInstances()}async handleOrderByChanged(e){this.selectedOrderByState=e,await this.loadWorkflowInstances()}applyQueryString(e){var t;const l=ee(e);this.selectedWorkflowId=l.workflow,this.selectedWorkflowStatus=l.status,this.selectedOrderByState=null!==(t=l.orderBy)&&void 0!==t?t:Q.Started,this.currentPage=l.page?parseInt(l.page):0,this.currentPageSize=l.pageSize?parseInt(l.pageSize):15}async loadWorkflowBlueprints(){const e=this.createClient(),t=await e.workflowRegistryApi.list(null,null,{allVersions:!0});this.workflowBlueprints=t.items}async loadWorkflowInstances(){const e=this.createClient();this.workflowInstances=await e.workflowInstancesApi.list(this.currentPage,this.currentPageSize,this.selectedWorkflowId,this.selectedWorkflowStatus,this.selectedOrderByState,this.currentSearchTerm)}createClient(){return Z(this.serverUrl)}getLatestWorkflowBlueprintVersions(){const e=H.groupBy(this.workflowBlueprints,"id");return H.map(e,(e=>Qe.first(H.sortBy(e,"version","desc"))))}buildFilterUrl(e,t,l){const a={};return e&&(a.workflow=e),t&&(a.status=t),l&&(a.orderBy=l),this.currentPage&&(a.page=this.currentPage.toString()),this.currentPageSize&&(a.pageSize=this.currentPageSize.toString()),`/workflow-instances?${H.map(a,((e,t)=>`${t}=${e}`)).join("&")}`}getStatusColor(e){switch(e){default:case J.Idle:return"gray";case J.Running:return"rose";case J.Suspended:return"blue";case J.Finished:return"green";case J.Faulted:return"red";case J.Cancelled:return"yellow"}}updateSelectAllChecked(){this.selectAllChecked=0!=this.workflowInstances.items.length&&this.workflowInstances.items.findIndex((e=>this.selectedWorkflowInstanceIds.findIndex((t=>t==e.id))<0))<0}async routeChanged(e){e.pathname.toLowerCase().indexOf("workflow-instances")<0||(this.applyQueryString(e.search),await this.loadWorkflowInstances())}onSelectAllCheckChange(e){const t=e.target.checked;this.selectAllChecked=t,this.selectedWorkflowInstanceIds=[],t&&(this.selectedWorkflowInstanceIds=this.workflowInstances.items.map((e=>e.id)))}onWorkflowInstanceCheckChange(e,t){this.selectedWorkflowInstanceIds=e.target.checked?[...this.selectedWorkflowInstanceIds,t.id]:this.selectedWorkflowInstanceIds.filter((e=>e!=t.id)),this.updateSelectAllChecked()}async onDeleteClick(e,t){const l=this.t;if(!await K.show(l("DeleteDialog.Title"),l("DeleteDialog.Message")))return;const a=this.createClient();await a.workflowInstancesApi.delete(t.id),await this.loadWorkflowInstances()}async onBulkDelete(){const e=this.t;if(!await K.show(e("BulkDeleteDialog.Title"),e("BulkDeleteDialog.Message")))return;const t=this.createClient();await t.workflowInstancesApi.bulkDelete({workflowInstanceIds:this.selectedWorkflowInstanceIds}),this.selectedWorkflowInstanceIds=[],await this.loadWorkflowInstances(),this.currentPage=0}async onBulkActionSelected(e){const t=e.detail;switch(t.name){case"Delete":await this.onBulkDelete();break;default:t.handler()}this.updateSelectAllChecked()}async onSearch(e){e.preventDefault();const t=new FormData(e.currentTarget).get("searchTerm");this.currentSearchTerm=t.toString(),await this.loadWorkflowInstances()}render(){const e=this.basePath,l=this.workflowInstances.items,a=this.workflowBlueprints,s=this.workflowInstances.totalCount,r=this.t;return t("div",null,t("div",{class:"elsa-relative elsa-z-10 elsa-flex-shrink-0 elsa-flex elsa-h-16 elsa-bg-white elsa-border-b elsa-border-gray-200"},t("div",{class:"elsa-flex-1 elsa-px-4 elsa-flex elsa-justify-between sm:elsa-px-6 lg:elsa-px-8"},t("div",{class:"elsa-flex-1 elsa-flex"},t("form",{class:"elsa-w-full elsa-flex md:ml-0",onSubmit:e=>this.onSearch(e)},t("label",{htmlFor:"search_field",class:"elsa-sr-only"},"Search"),t("div",{class:"elsa-relative elsa-w-full elsa-text-cool-gray-400 focus-within:elsa-text-cool-gray-600"},t("div",{class:"elsa-absolute elsa-inset-y-0 elsa-left-0 elsa-flex elsa-items-center elsa-pointer-events-none"},t("svg",{class:"elsa-h-5 elsa-w-5",fill:"currentColor",viewBox:"0 0 20 20"},t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"}))),t("input",{name:"searchTerm",class:"elsa-block elsa-w-full elsa-h-full elsa-pl-8 elsa-pr-3 elsa-py-2 elsa-rounded-md elsa-text-cool-gray-900 elsa-placeholder-cool-gray-500 focus:elsa-placeholder-cool-gray-400 sm:elsa-text-sm elsa-border-0 focus:elsa-outline-none focus:elsa-ring-0",placeholder:r("Search"),type:"search"})))))),t("div",{class:"elsa-p-8 elsa-flex elsa-content-end elsa-justify-right elsa-bg-white elsa-space-x-4"},t("div",{class:"elsa-flex-shrink-0"},this.renderBulkActions()),t("div",{class:"elsa-flex-1"}," "),this.renderWorkflowFilter(),this.renderStatusFilter(),this.renderOrderByFilter()),t("div",{class:"elsa-mt-8 sm:elsa-block"},t("div",{class:"elsa-align-middle elsa-inline-block elsa-min-w-full elsa-border-b elsa-border-gray-200"},t("table",{class:"elsa-min-w-full"},t("thead",null,t("tr",{class:"elsa-border-t elsa-border-gray-200"},t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},t("input",{type:"checkbox",value:"true",checked:this.selectAllChecked,onChange:e=>this.onSelectAllCheckChange(e),class:"focus:elsa-ring-blue-500 elsa-h-4 elsa-w-4 elsa-text-blue-600 elsa-border-gray-300 elsa-rounded"})),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Id")),t("th",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.CorrelationId")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Workflow")),t("th",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-right elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Version")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.InstanceName")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Status")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Created")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Finished")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.LastExecuted")),t("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},r("Table.Faulted")),t("th",{class:"elsa-pr-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"}))),t("tbody",{class:"elsa-bg-white elsa-divide-y elsa-divide-gray-100"},l.map((l=>{var s;const n=null!==(s=a.find((e=>e.id==l.definitionId&&e.version==l.version)))&&void 0!==s?s:{name:"Not Found",displayName:"(Workflow definition not found)"},i=n.displayName||n.name||"Untitled",o=this.getStatusColor(l.workflowStatus),d=`${e}/workflow-instances/${l.id}`,c=l.name?l.name:"",u=this.selectedWorkflowInstanceIds.findIndex((e=>e===l.id))>=0,h=te(l.createdAt),f=l.finishedAt?te(l.finishedAt):null,g=l.lastExecutedAt?te(l.lastExecutedAt):null,p=l.faultedAt?te(l.faultedAt):null;return t("tr",null,t("td",{class:"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900"},t("input",{type:"checkbox",value:l.id,checked:u,onChange:e=>this.onWorkflowInstanceCheckChange(e,l),class:"focus:elsa-ring-blue-500 elsa-h-4 elsa-w-4 elsa-text-blue-600 elsa-border-gray-300 elsa-rounded"})),t("td",{class:"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900"},t("stencil-route-link",{url:d,anchorClass:"elsa-truncate hover:elsa-text-gray-600"},l.id)),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900"},l.correlationId?l.correlationId:""),t("td",{class:"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900 elsa-text-left"},t("stencil-route-link",{url:`/workflow-registry/${l.definitionId}`,anchorClass:"elsa-truncate hover:elsa-text-gray-600"},i)),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-right elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-uppercase"},l.version),t("td",{class:"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900 elsa-text-left"},t("stencil-route-link",{url:d,anchorClass:"elsa-truncate hover:elsa-text-gray-600"},c)),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-right"},t("div",{class:"elsa-flex elsa-items-center elsa-space-x-3 lg:elsa-pl-2"},t("div",{class:`flex-shrink-0 elsa-w-2-5 elsa-h-2-5 elsa-rounded-full elsa-bg-${o}-600`}),t("span",null,l.workflowStatus))),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left"},h.format("DD-MM-YYYY HH:mm:ss")),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left"},f?f.format("DD-MM-YYYY HH:mm:ss"):"-"),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left"},g?g.format("DD-MM-YYYY HH:mm:ss"):"-"),t("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left"},p?p.format("DD-MM-YYYY HH:mm:ss"):"-"),t("td",{class:"elsa-pr-6"},t("elsa-context-menu",{history:this.history,menuItems:[{text:r("Table.ContextMenu.View"),anchorUrl:d,icon:t("svg",{class:"elsa-h-5 elsa-w-5 elsa-text-gray-500",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))},{text:r("Table.ContextMenu.Delete"),clickHandler:e=>this.onDeleteClick(e,l),icon:t("svg",{class:"elsa-h-5 elsa-w-5 elsa-text-gray-500",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},t("path",{stroke:"none",d:"M0 0h24v24H0z"}),t("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),t("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),t("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),t("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),t("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))}]})))})))),t("elsa-pager",{page:this.currentPage,pageSize:this.currentPageSize,totalCount:s,history:this.history,onPaged:this.onPaged,culture:this.culture}))))}renderBulkActions(){const e=t("svg",{class:"elsa-mr-3 elsa-h-5 elsa-w-5 elsa-text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M13 10V3L4 14h7v7l9-11h-7z"})),l=this.bulkActions;return t("elsa-dropdown-button",{text:(0,this.t)("BulkActions.Title"),items:l,icon:e,origin:a.TopLeft,onItemSelected:e=>this.onBulkActionSelected(e)})}renderWorkflowFilter(){const e=this.t,l=this.getLatestWorkflowBlueprintVersions(),s=this.selectedWorkflowId,r=l.find((e=>e.id==s)),n=s?r&&(r.name||r.displayName)?r.displayName||r.name:e("Untitled"):e("Filters.Workflow.Label"),i=this.selectedWorkflowStatus,o=this.selectedOrderByState,d=this.history;let c=l.map((t=>{const l={text:t.displayName&&t.displayName.length>0?t.displayName:t.name||e("Untitled"),value:t.id,isSelected:t.id==s};return d&&(l.url=this.buildFilterUrl(t.id,i,o)),l}));const u={text:e("Filters.Workflow.All"),value:null,isSelected:!s};return d&&(u.url=this.buildFilterUrl(null,i,o)),c=[u,...c],t("elsa-dropdown-button",{text:n,items:c,icon:t("svg",{class:"elsa-mr-3 elsa-h-5 elsa-w-5 elsa-text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t("path",{stroke:"none",d:"M0 0h24v24H0z"}),t("rect",{x:"4",y:"4",width:"6",height:"6",rx:"1"}),t("rect",{x:"14",y:"4",width:"6",height:"6",rx:"1"}),t("rect",{x:"4",y:"14",width:"6",height:"6",rx:"1"}),t("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1"})),origin:a.TopRight,onItemSelected:e=>this.handleWorkflowIdChanged(e.detail.value)})}renderStatusFilter(){const e=this.t,l=this.selectedWorkflowStatus,s=l||e("Filters.Status.Label"),r=this.history,n=[null,J.Running,J.Suspended,J.Finished,J.Faulted,J.Cancelled,J.Idle].map((t=>{const a={text:null!=t?t:e("Filters.Status.All"),isSelected:t==l,value:t};return r&&(a.url=this.buildFilterUrl(this.selectedWorkflowId,t,this.selectedOrderByState)),a}));return t("elsa-dropdown-button",{text:s,items:n,icon:t("svg",{class:"elsa-mr-3 elsa-h-5 elsa-w-5 elsa-text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t("circle",{cx:"12",cy:"12",r:"10"}),t("polygon",{points:"10 8 16 12 10 16 10 8"})),origin:a.TopRight,onItemSelected:e=>this.handleWorkflowStatusChanged(e.detail.value)})}renderOrderByFilter(){const e=this.t,l=this.selectedOrderByState,s=l?e("Filters.Sort.SelectedLabel",{Key:l}):e("Filters.Sort.Label"),r=this.history,n=[Q.Finished,Q.LastExecuted,Q.Started].map((e=>{const t={text:e,value:e,isSelected:e==l};return r&&(t.url=this.buildFilterUrl(this.selectedWorkflowId,this.selectedWorkflowStatus,e)),t}));return t("elsa-dropdown-button",{text:s,items:n,icon:t("svg",{class:"elsa-mr-3 elsa-h-5 elsa-w-5 elsa-text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"})),origin:a.TopRight,onItemSelected:e=>this.handleOrderByChanged(e.detail.value)})}static get watchers(){return{workflowId:["handleWorkflowIdChanged"],workflowStatus:["handleWorkflowStatusChanged"],orderBy:["handleOrderByChanged"]}}};se.injectProps(Xe,["serverUrl","culture","basePath"]),s(Xe);export{Xe as elsa_workflow_instance_list_screen};