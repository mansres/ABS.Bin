import{r as e,h as s}from"./p-9ac75b7d.js";import{S as a}from"./p-52f280e6.js";import{p as t,m as l}from"./p-ab6c762d.js";import"./p-c912e9a0.js";import"./p-bd8b186e.js";const n=class{constructor(s){e(this,s),this.cases=[],this.supportedSyntaxes=[a.JavaScript,a.Liquid],this.syntaxSwitchCount=0}async componentWillLoad(){this.cases=t(this.propertyModel.expressions.Switch)||[]}updatePropertyModel(){this.propertyModel.expressions.Switch=JSON.stringify(this.cases),this.multiExpressionEditor.expressions[a.Json]=JSON.stringify(this.cases,null,2)}onDefaultSyntaxValueChanged(e){this.cases=e.detail}onAddCaseClick(){this.cases=[...this.cases,{name:`Case ${this.cases.length+1}`,syntax:a.JavaScript,expressions:{[a.JavaScript]:""}}],this.updatePropertyModel()}onDeleteCaseClick(e){this.cases=this.cases.filter((s=>s!=e)),this.updatePropertyModel()}onCaseNameChanged(e,s){s.name=e.currentTarget.value.trim(),this.updatePropertyModel()}onCaseExpressionChanged(e,s){s.expressions[s.syntax]=e.detail,this.updatePropertyModel()}onCaseSyntaxChanged(e,s,a){s.syntax=e.currentTarget.value,a.language=l(s.syntax),this.updatePropertyModel()}onMultiExpressionEditorValueChanged(e){const s=e.detail,a=t(s);a&&Array.isArray(a)&&(this.propertyModel.expressions.Switch=s,this.cases=a)}onMultiExpressionEditorSyntaxChanged(e){this.syntaxSwitchCount++}render(){const e=this.cases,t=this.supportedSyntaxes,n=JSON.stringify(e,null,2);return s("div",null,s("elsa-multi-expression-editor",{ref:e=>this.multiExpressionEditor=e,label:this.propertyDescriptor.label,defaultSyntax:a.Json,supportedSyntaxes:[a.Json],expressions:{Json:n},"editor-height":"20rem",onExpressionChanged:e=>this.onMultiExpressionEditorValueChanged(e),onSyntaxChanged:e=>this.onMultiExpressionEditorSyntaxChanged(e)},s("table",{class:"elsa-min-w-full elsa-divide-y elsa-divide-gray-200"},s("thead",{class:"elsa-bg-gray-50"},s("tr",null,s("th",{class:"elsa-px-6 elsa-py-3 elsa-text-left elsa-text-xs elsa-font-medium elsa-text-gray-500 elsa-text-right elsa-tracking-wider elsa-w-3/12"},"Name"),s("th",{class:"elsa-px-6 elsa-py-3 elsa-text-left elsa-text-xs elsa-font-medium elsa-text-gray-500 elsa-text-right elsa-tracking-wider elsa-w-8/12"},"Expression"),s("th",{class:"elsa-px-6 elsa-py-3 elsa-text-left elsa-text-xs elsa-font-medium elsa-text-gray-500 elsa-text-right elsa-tracking-wider elsa-w-1/12"},"Â "))),s("tbody",null,e.map(((e,a)=>{const n=e.expressions[e.syntax],i=e.syntax,r=l(i);let o=null;return s("tr",{key:`case-${a}`},s("td",{class:"elsa-py-2 elsa-pr-5"},s("input",{type:"text",value:e.name,onChange:s=>this.onCaseNameChanged(s,e),class:"focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-block elsa-w-full elsa-min-w-0 elsa-rounded-md sm:elsa-text-sm elsa-border-gray-300"})),s("td",{class:"elsa-py-2 pl-5"},s("div",{class:"elsa-mt-1 elsa-relative elsa-rounded-md elsa-shadow-sm"},s("elsa-expression-editor",{key:`expression-editor-${a}-${this.syntaxSwitchCount}`,ref:e=>o=e,expression:n,language:r,"single-line":!0,editorHeight:"2.75em",padding:"elsa-pt-1.5 elsa-pl-1 elsa-pr-28",onExpressionChanged:s=>this.onCaseExpressionChanged(s,e)}),s("div",{class:"elsa-absolute elsa-inset-y-0 elsa-right-0 elsa-flex elsa-items-center"},s("select",{onChange:s=>this.onCaseSyntaxChanged(s,e,o),class:"focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-h-full elsa-py-0 elsa-pl-2 elsa-pr-7 elsa-border-transparent elsa-bg-transparent elsa-text-gray-500 sm:elsa-text-sm elsa-rounded-md"},t.map((e=>s("option",{selected:e==i},e))))))),s("td",{class:"elsa-pt-1 elsa-pr-2 elsa-text-right"},s("button",{type:"button",onClick:()=>this.onDeleteCaseClick(e),class:"elsa-h-5 elsa-w-5 elsa-mx-auto elsa-outline-none focus:elsa-outline-none"},s("svg",{class:"elsa-h-5 elsa-w-5 elsa-text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},s("polyline",{points:"3 6 5 6 21 6"}),s("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),s("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),s("line",{x1:"14",y1:"11",x2:"14",y2:"17"})))))})))),s("button",{type:"button",onClick:()=>this.onAddCaseClick(),class:"elsa-inline-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-border elsa-border-transparent elsa-shadow-sm elsa-text-sm elsa-font-medium elsa-rounded-md elsa-text-white elsa-bg-blue-600 hover:elsa-bg-blue-700 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 elsa-mt-2"},s("svg",{class:"-elsa-ml-1 elsa-mr-2 elsa-h-5 elsa-w-5",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},s("path",{stroke:"none",d:"M0 0h24v24H0z"}),s("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),s("line",{x1:"5",y1:"12",x2:"19",y2:"12"})),"Add Case")))}};export{n as elsa_switch_cases_property};