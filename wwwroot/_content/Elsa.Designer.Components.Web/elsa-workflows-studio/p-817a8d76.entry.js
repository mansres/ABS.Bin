import{r as e,h as s}from"./p-9ac75b7d.js";import{a}from"./p-f0c26962.js";import{l}from"./p-b03b50df.js";import{G as t}from"./p-7518f8d9.js";import{T as i}from"./p-fc89621a.js";import"./p-80452beb.js";import"./p-c912e9a0.js";import"./p-bd8b186e.js";import"./p-adbb57a5.js";import"./p-52f280e6.js";import"./p-fe704386.js";import"./p-83f217d4.js";const r={en:{default:{Name:"Name",Instances:"Instances",LatestVersion:"Latest Version",PublishedVersion:"Published Version",Edit:"Edit",Delete:"Delete",DeleteConfirmationModel:{Title:"Delete Workflow Definition",Message:"Are you sure you wish to permanently delete this workflow, including all of its workflow instances?"}}},"nl-NL":{default:{Name:"Naam",Instances:"Instanties",LatestVersion:"Laatste Versie",PublishedVersion:"Gepubliceerde Versie",Edit:"Bewerken",Delete:"Verwijderen",DeleteConfirmationModel:{Title:"Verwijder Workflow Definitie",Message:"Weet je zeker dat je deze workflow permanent wilt verwijderen, inclusief alle bijbehorende workflow instanties?"}}}},n=class{constructor(s){e(this,s),this.workflowDefinitions={items:[],page:1,pageSize:50,totalCount:0},this.publishedWorkflowDefinitions=[]}async componentWillLoad(){this.i18next=await l(this.culture,r),await this.loadWorkflowDefinitions()}async onDeleteClick(e,s){const l=e=>this.i18next.t(e);if(!await this.confirmDialog.show(l("DeleteConfirmationModel.Title"),l("DeleteConfirmationModel.Message")))return;const a=this.createClient();await a.workflowDefinitionsApi.delete(s.definitionId),await this.loadWorkflowDefinitions()}async loadWorkflowDefinitions(){const e=this.createClient(),s=await e.workflowDefinitionsApi.list(0,50,{isLatest:!0}),l=s.items.filter((e=>!e.isPublished)).map((e=>e.definitionId));this.publishedWorkflowDefinitions=await e.workflowDefinitionsApi.getMany(l,{isPublished:!0}),this.workflowDefinitions=s}createClient(){return a(this.serverUrl)}render(){const e=this.workflowDefinitions.items,l=this.i18next,a=t(l),i=this.basePath;return s("div",null,s("div",{class:"elsa-align-middle elsa-inline-block elsa-min-w-full elsa-border-b elsa-border-gray-200"},s("table",{class:"elsa-min-w-full"},s("thead",null,s("tr",{class:"elsa-border-t elsa-border-gray-200"},s("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},s("span",{class:"lg:elsa-pl-2"},s(a,{label:"Name"}))),s("th",{class:"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},s(a,{label:"Instances"})),s("th",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-right elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},s(a,{label:"LatestVersion"})),s("th",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-right elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"},s(a,{label:"PublishedVersion"})),s("th",{class:"elsa-pr-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-right elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"}))),s("tbody",{class:"elsa-bg-white elsa-divide-y elsa-divide-gray-100"},e.map((e=>{const t=e.version,r=e.isPublished?e:this.publishedWorkflowDefinitions.find((s=>s.definitionId==e.definitionId)),n=r?r.version:"-";let o=e.displayName;o&&0!=o.trim().length||(o=e.name),o&&0!=o.trim().length||(o="Untitled");const d=`${i}/workflow-definitions/${e.definitionId}`,c=`/workflow-instances?workflow=${e.definitionId}`,p=s("svg",{class:"elsa-h-5 elsa-w-5 elsa-text-gray-500",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},s("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})),h=s("svg",{class:"elsa-h-5 elsa-w-5 elsa-text-gray-500",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},s("path",{stroke:"none",d:"M0 0h24v24H0z"}),s("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),s("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),s("line",{x1:"14",y1:"11",x2:"14",y2:"17"}),s("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),s("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}));return s("tr",null,s("td",{class:"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900"},s("div",{class:"elsa-flex elsa-items-center elsa-space-x-3 lg:elsa-pl-2"},s("stencil-route-link",{url:d,anchorClass:"elsa-truncate hover:elsa-text-gray-600"},s("span",null,o)))),s("td",{class:"elsa-px-6 elsa-py-3 elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-font-medium"},s("div",{class:"elsa-flex elsa-items-center elsa-space-x-3 lg:elsa-pl-2"},s("stencil-route-link",{url:c,anchorClass:"elsa-truncate hover:elsa-text-gray-600"},s(a,{label:"Instances"})))),s("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-right"},t),s("td",{class:"hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-right"},n),s("td",{class:"elsa-pr-6"},s("elsa-context-menu",{history:this.history,menuItems:[{text:l.t("Edit"),anchorUrl:d,icon:p},{text:l.t("Delete"),clickHandler:s=>this.onDeleteClick(s,e),icon:h}]})))}))))),s("elsa-confirm-dialog",{ref:e=>this.confirmDialog=e,culture:this.culture}))}};i.injectProps(n,["serverUrl","culture","basePath"]);export{n as elsa_workflow_definitions_list_screen};